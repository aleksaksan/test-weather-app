import{r as g,w as W,U as w,d as h,t as v,c as x,a as p,u as _,b as o,F as C,e as $,f as m,g as D,h as j,i as B,o as i,_ as E,j as f}from"./index-CWV61cMc.js";function R(l,r){const n=g(null),d=g(null),e=g(!0),y=async()=>{if(!l.value||!r.value){n.value="Can't get your coordinates!",e.value=!1;return}try{const a=["weather_code","temperature_2m_max","temperature_2m_min","temperature_2m_mean"],u={latitude:l.value.toString(),longitude:r.value.toString(),timezone:"auto",daily:a.join(",")},s=new URLSearchParams(u),c=await(await fetch(`${w}?${s}`)).json();d.value=c}catch(a){a instanceof Error?n.value=a.message:n.value=String(a)}finally{e.value=!1}};return W([l,r],([a,u])=>{a&&u&&y()},{immediate:!0}),{error:n,dailyWeatherData:d}}const T={key:0},F={key:1,class:"list"},L=h({__name:"DailyWeather",props:{latitude:{},longitude:{}},setup(l){const r=l,n=v(r,"latitude"),d=v(r,"longitude"),{dailyWeatherData:e,error:y}=R(n,d),a=x(()=>{if(e)return e.value?.daily.time.map((u,s)=>{const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=new Date(u),S=c.getDate().toString().padStart(2,"0"),k=(c.getMonth()+1).toString().padStart(2,"0");return{date:`${S}.${k}`,weekDay:t[c.getDay()],weatherCode:e.value?.daily.weather_code[s],temperature_2m_max:e.value?.daily.temperature_2m_max[s],temperature_2m_min:e.value?.daily.temperature_2m_min[s],temperature_2m_mean:e.value?.daily.temperature_2m_mean[s]}})});return(u,s)=>_(y)?(i(),p("div",T,o(_(y)),1)):(i(),p("ul",F,[(i(!0),p(C,null,$(a.value,t=>(i(),p("li",{key:t.date,class:"list-item"},[m("div",null,o(t.weekDay),1),m("div",null,o(t.date),1),(i(),D(j(_(B)(t?.weatherCode)))),m("div",null,o(t.temperature_2m_max)+"°",1),m("div",null,o(t.temperature_2m_min)+"°",1),m("div",null,o(t.temperature_2m_mean)+"°",1)]))),128))]))}}),P=E(L,[["__scopeId","data-v-43b2d04d"]]),b=h({__name:"DailyView",setup(l){const r=f("latitude",null),n=f("longitude",null);return(d,e)=>(i(),D(P,{latitude:_(r),longitude:_(n)},null,8,["latitude","longitude"]))}});export{b as default};
